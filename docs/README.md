# 导盲犬 (IamDog) - 桌面AI助手

> 一个具备屏幕感知能力的可爱桌面AI助手

**项目状态**：✅ MVP 已完成  
**创建时间**：2026-01-08  
**负责人**：哈雅（263321）

---

## 📖 项目简介

导盲犬（IamDog）是一个创新的桌面AI助手，以可爱的金毛导盲犬形象出现在用户桌面上。它的核心创新在于**屏幕感知能力** - AI能够"看到"用户的屏幕内容，从而提供更智能、更贴合场景的辅助。

### 核心特性

🐕 **可爱的桌面宠物**
- 金毛导盲犬形象
- 静态图标，简洁友好
- 左键点击打开对话，长按拖动位置
- 初始位置在右下角

👁️ **屏幕感知能力**
- 理解用户当前屏幕内容
- 基于视觉上下文回答问题
- 支持粘贴板截图识别
- 支持同时发送多张图片

💬 **智能对话交互**
- 点击宠物或快捷键（Cmd+Shift+0）唤醒
- 对话窗口智能定位（图标上方）
- 自动聚焦输入框
- 支持多轮对话记忆
- Markdown格式回答，代码高亮
- 流式响应，实时显示

🔒 **隐私友好**
- 按需截图，用户完全可控
- 不做主动监控
- 数据不持久化

---

## 🎯 使用场景

### 1. 文档理解
**场景**：用户正在阅读技术文档或产品说明
- 询问："这个API怎么用？"
- AI看到文档内容，提供针对性的使用示例

### 2. 学习辅助
**场景**：用户正在学习教程或新技术
- 询问："这个概念我不太理解，能解释一下吗？"
- AI结合屏幕内容提供详细解释

### 3. 代码开发辅助
**场景**：用户正在编写代码遇到问题
- 询问："这段代码有什么问题？"
- AI分析代码截图，提供修改建议

---

## 🚀 快速开始

### 系统要求
- macOS 10.15+
- 屏幕录制权限
- 粘贴板访问权限

### 安装使用

#### 方式一：一键启动（推荐）
```bash
./start.sh
```

#### 方式二：手动启动
```bash
# 安装依赖
npm install

# 启动开发服务器
npm run dev

# 在另一个终端启动 Electron
npm run electron:dev
```

### 首次配置
1. 启动应用后，点击小狗图标打开对话窗口
2. 点击右上角设置图标
3. 输入 IdeaLab API 密钥
4. 选择模型（默认 qwen-vl-max-latest）
5. 保存配置

### 基本操作

#### 打开对话窗口
- **方式1**：左键快速点击桌面小狗（< 200ms）
- **方式2**：按快捷键 `Cmd+Shift+0`

#### 移动图标位置
- 左键长按小狗图标（≥ 200ms）
- 移动鼠标到目标位置
- 释放鼠标

#### 退出应用
- 右键点击小狗图标
- 选择"退出"

#### 发送消息
1. 在输入框输入问题
2. 可选：勾选"📷 包含当前截图"（智能窗口截图，自动压缩）
3. 可选：勾选"📋 粘贴板截图"
4. 点击发送或按 Enter

#### 其他操作
- **复制回答**：点击回答下方的复制按钮
- **新建会话**：关闭对话窗口后重新打开
- **查看调试信息**：打开开发者工具查看控制台

---

## 💡 产品特色

### 与传统AI的区别

| 特性 | 传统AI助手 | 导盲犬 |
|------|-----------|--------|
| 交互方式 | 纯文本输入 | 文本 + 屏幕截图 |
| 上下文理解 | 仅限对话历史 | 对话历史 + 视觉上下文 |
| 使用场景 | 通用问答 | 场景化辅助 |
| 视觉呈现 | 聊天窗口 | 桌面宠物 + 对话窗口 |
| 隐私控制 | 被动接收 | 主动控制 |
| 多图片支持 | 单张 | 多张（截图+剪贴板） |

### 核心优势

✨ **跨应用的屏幕感知**
- 不限于特定应用
- 理解任何屏幕内容
- 无需手动复制粘贴

✨ **可爱的宠物形象**
- 降低使用门槛
- 增加亲和力
- 陪伴式体验

✨ **智能交互设计**
- 点击/长按区分明确
- 对话窗口智能定位
- 自动聚焦输入框
- 多桌面显示支持

✨ **完全可控**
- 按需截图
- 用户主动触发
- 隐私友好

---

## 🛠️ 技术栈

- **框架**：Electron 28+
- **UI**：React 18 + TypeScript 5 + Tailwind CSS 3
- **状态管理**：Zustand
- **构建工具**：Vite
- **AI服务**：IdeaLab（千问多模态模型 qwen-vl-max-latest）
- **API调用**：OpenAI TypeScript SDK
- **Markdown渲染**：Marked + Highlight.js
- **配置存储**：electron-store
- **日志记录**：electron-log
- **平台**：macOS

---

## 📋 已实现功能

### ✅ 核心功能
- [x] 桌面宠物窗口（右下角初始位置）
- [x] 点击/长按交互（基于时间判断 200ms）
- [x] 右键菜单（退出功能）
- [x] 对话窗口（智能定位在图标上方）
- [x] 全局快捷键（Cmd+Shift+0）
- [x] 智能窗口截图（自动识别当前窗口）
- [x] 图片自动压缩（缩放50% + JPEG 80%）
- [x] 粘贴板图片读取
- [x] 多图片同时发送
- [x] AI 对话（流式响应）
- [x] Markdown 渲染
- [x] 代码高亮
- [x] 配置管理（API密钥持久化）
- [x] 自动聚焦输入框
- [x] 多桌面显示（Mission Control）

### ✅ 用户体验
- [x] 一键启动脚本
- [x] 调试日志输出
- [x] 错误提示友好
- [x] 图片拖拽禁用
- [x] 边界智能处理
- [x] 图片大小优化（避免API限制）

---

## 🎨 界面预览

### 宠物窗口
```
                                    ┌─────────┐
                                    │         │
                                    │   🐕    │  ← 右下角
                                    │         │
                                    └─────────┘
```

**交互说明**：
- 左键快速点击（< 200ms）→ 打开对话框
- 左键长按（≥ 200ms）→ 拖动移动位置

### 对话窗口
```
                  ┌─────────────────────────────────────┐
                  │  🐶 导盲犬助手                 [⚙️] [×] │
                  ├─────────────────────────────────────┤
                  │                                     │
                  │  用户：这个API怎么用？               │
                  │  [📷 截图显示]                       │
                  │                                     │
                  │  助手：根据您的截图，这个API...      │
                  │  [Markdown格式回答]                  │
                  │  [📋 复制]                           │
                  │                                     │
                  ├─────────────────────────────────────┤
                  │  [输入框 - 自动聚焦]                 │
                  │  [📷 包含当前截图] [📋 粘贴板截图]   │
                  │                          [发送] →   │
                  └─────────────────────────────────────┘
┌─────────┐
│   🐕    │  ← 图标位置
└─────────┘
```

---

## 🔐 隐私与安全

### 数据处理原则
- ✅ 截图按需生成，用完即删
- ✅ 对话历史不持久化
- ✅ API密钥本地加密存储
- ✅ 用户完全控制数据流

### 权限说明
- **屏幕录制权限**：用于截取屏幕内容
- **粘贴板访问权限**：用于读取粘贴板截图
- **网络权限**：仅用于调用千问API

---

## 📝 配置说明

### 必填配置
- **IdeaLab API密钥**：用于调用千问多模态模型

### 可选配置
- **模型选择**：默认 qwen-vl-max-latest
- **快捷键**：默认 Cmd+Shift+0

### 配置文件位置
- macOS: `~/Library/Application Support/IamDog/config.json`

---

## 🐛 故障排查

### 图标无法拖动
- 确保长按时间 ≥ 200ms
- 查看控制台是否输出 "🔄 开始拖动"

### 点击无法打开对话框
- 确保点击时间 < 200ms
- 查看控制台是否输出 "👆 点击操作"

### 截图失败
- 检查屏幕录制权限：系统偏好设置 → 安全性与隐私 → 屏幕录制
- 重启应用后重试

### API 调用失败
- 检查 API 密钥是否正确
- 检查网络连接
- 查看错误提示信息

---

## 🤝 贡献指南

本项目目前为内部工具，暂不接受外部贡献。

---

## 📄 许可证

内部项目，仅供公司内部使用。

---

## 📞 联系方式

- **负责人**：哈雅（263321）
- **项目地址**：git@gitlab.alibaba-inc.com:haya.lhw/IamDog.git

---

**最后更新**：2026-01-08

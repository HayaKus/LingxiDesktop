# çµæ (Lingxi) - æŠ€æœ¯æ–¹æ¡ˆè®¾è®¡

> æ¡Œé¢AIåŠ©æ‰‹çš„è¯¦ç»†æŠ€æœ¯å®ç°æ–¹æ¡ˆ

**æ–‡æ¡£ç‰ˆæœ¬**ï¼šv5.0
**æœ€åæ›´æ–°**ï¼š2026-01-21
**è´Ÿè´£äºº**ï¼šå“ˆé›…ï¼ˆ263321ï¼‰
**çŠ¶æ€**ï¼šâœ… ç”Ÿäº§å°±ç»ª(å«MCPåè®®ã€å¤šä¼šè¯ç®¡ç†ã€BUCè®¤è¯ã€å‘½ä»¤æ‰§è¡Œç­‰å®Œæ•´åŠŸèƒ½)

---

## ğŸ“ æ•´ä½“æ¶æ„

### ç³»ç»Ÿæ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     çµæ (Lingxi) æ¡Œé¢åº”ç”¨                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  å® ç‰©çª—å£å±‚  â”‚  â”‚  å¯¹è¯çª—å£å±‚  â”‚  â”‚  é…ç½®ç®¡ç†å±‚  â”‚  â”‚è®¤è¯ç®¡ç† â”‚â”‚
â”‚  â”‚             â”‚  â”‚             â”‚  â”‚             â”‚  â”‚         â”‚â”‚
â”‚  â”‚ â€¢ å°ç‹—å›¾æ ‡   â”‚  â”‚ â€¢ è¾“å…¥æ¡†     â”‚  â”‚ â€¢ APIå¯†é’¥    â”‚  â”‚ â€¢ BUC   â”‚â”‚
â”‚  â”‚ â€¢ ç‚¹å‡»/é•¿æŒ‰  â”‚  â”‚ â€¢ æ¶ˆæ¯å±•ç¤º   â”‚  â”‚ â€¢ å¿«æ·é”®     â”‚  â”‚ â€¢ OAuth â”‚â”‚
â”‚  â”‚ â€¢ æ‹–æ‹½ç§»åŠ¨   â”‚  â”‚ â€¢ Markdown   â”‚  â”‚ â€¢ æŒä¹…åŒ–     â”‚  â”‚ â€¢ ç”¨æˆ·  â”‚â”‚
â”‚  â”‚ â€¢ å³ä¸‹è§’å®šä½ â”‚  â”‚ â€¢ æ™ºèƒ½å®šä½   â”‚  â”‚ â€¢ ä½ç½®è®°å¿†   â”‚  â”‚   ä¿¡æ¯  â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                         æ ¸å¿ƒåŠŸèƒ½å±‚                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ å±å¹•æˆªå›¾æ¨¡å— â”‚  â”‚ ç²˜è´´æ¿æ¨¡å—   â”‚  â”‚  AIå¯¹è¯æ¨¡å—  â”‚  â”‚ä¼šè¯ç®¡ç† â”‚â”‚
â”‚  â”‚             â”‚  â”‚             â”‚  â”‚             â”‚  â”‚         â”‚â”‚
â”‚  â”‚ â€¢ æ™ºèƒ½çª—å£   â”‚  â”‚ â€¢ è¯»å–æˆªå›¾   â”‚  â”‚ â€¢ åƒé—®API    â”‚  â”‚ â€¢ å¤šä¼šè¯â”‚â”‚
â”‚  â”‚ â€¢ Base64ç¼–ç  â”‚  â”‚ â€¢ Base64è½¬æ¢ â”‚  â”‚ â€¢ ä¸Šä¸‹æ–‡ç®¡ç† â”‚  â”‚ â€¢ æŒä¹…åŒ–â”‚â”‚
â”‚  â”‚ â€¢ è‡ªåŠ¨å‹ç¼©   â”‚  â”‚ â€¢ æ ¼å¼è¯†åˆ«   â”‚  â”‚ â€¢ æµå¼å“åº”   â”‚  â”‚ â€¢ è‡ªåŠ¨  â”‚â”‚
â”‚  â”‚ â€¢ å†…å­˜å­˜å‚¨   â”‚  â”‚ â€¢ ç²˜è´´æ¿ç›‘å¬ â”‚  â”‚ â€¢ Tokenä¼˜åŒ–  â”‚  â”‚   ä¿å­˜  â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ å‘½ä»¤æ‰§è¡Œæ¨¡å— â”‚  â”‚ ä¸Šä¸‹æ–‡ç®¡ç†   â”‚  â”‚  å®‰å…¨æ¨¡å—    â”‚  â”‚MCPåè®®  â”‚â”‚
â”‚  â”‚             â”‚  â”‚             â”‚  â”‚             â”‚  â”‚         â”‚â”‚
â”‚  â”‚ â€¢ AIè§¦å‘    â”‚  â”‚ â€¢ Tokenè®¡ç®—  â”‚  â”‚ â€¢ å‘½ä»¤å®¡æ ¸   â”‚  â”‚ â€¢ SDK   â”‚â”‚
â”‚  â”‚ â€¢ å®‰å…¨éªŒè¯   â”‚  â”‚ â€¢ æ™ºèƒ½è£å‰ª   â”‚  â”‚ â€¢ æƒé™æ§åˆ¶   â”‚  â”‚ â€¢ OAuth â”‚â”‚
â”‚  â”‚ â€¢ ç»“æœè¿”å›   â”‚  â”‚ â€¢ å›¾ç‰‡ä¼˜å…ˆ   â”‚  â”‚ â€¢ æ—¥å¿—è®°å½•   â”‚  â”‚ â€¢ å·¥å…·  â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                         ç³»ç»Ÿæ¥å£å±‚                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  Electron   â”‚  â”‚  macOS API  â”‚  â”‚   ç½‘ç»œå±‚     â”‚  â”‚å­˜å‚¨å±‚   â”‚â”‚
â”‚  â”‚             â”‚  â”‚             â”‚  â”‚             â”‚  â”‚         â”‚â”‚
â”‚  â”‚ â€¢ çª—å£ç®¡ç†   â”‚  â”‚ â€¢ æˆªå›¾æƒé™   â”‚  â”‚ â€¢ OpenAI SDK â”‚  â”‚ â€¢ Store â”‚â”‚
â”‚  â”‚ â€¢ å¿«æ·é”®     â”‚  â”‚ â€¢ ç²˜è´´æ¿API  â”‚  â”‚ â€¢ æµå¼å“åº”   â”‚  â”‚ â€¢ ä¼šè¯  â”‚â”‚
â”‚  â”‚ â€¢ IPCé€šä¿¡    â”‚  â”‚ â€¢ å¤šæ¡Œé¢æ”¯æŒ â”‚  â”‚ â€¢ é”™è¯¯å¤„ç†   â”‚  â”‚ â€¢ æ—¥å¿—  â”‚â”‚
â”‚  â”‚ â€¢ è¿›ç¨‹ç®¡ç†   â”‚  â”‚ â€¢ ç³»ç»Ÿå‘½ä»¤   â”‚  â”‚ â€¢ BUCè®¤è¯    â”‚  â”‚         â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ æ ¸å¿ƒæ¨¡å—è®¾è®¡

### 1. å® ç‰©çª—å£æ¨¡å—

#### 1.1 çª—å£å±æ€§
- **å°ºå¯¸**ï¼š120x120 åƒç´ 
- **åˆå§‹ä½ç½®**ï¼šå±å¹•å³ä¸‹è§’(è·è¾¹ç¼˜20px)
- **ä½ç½®è®°å¿†**ï¼šè‡ªåŠ¨ä¿å­˜åˆ°é…ç½®æ–‡ä»¶
- **ç‰¹æ€§**ï¼š
  - å§‹ç»ˆç½®é¡¶(alwaysOnTop: true)
  - é€æ˜èƒŒæ™¯(transparent: true)
  - æ— è¾¹æ¡†(frame: false)
  - å¤šæ¡Œé¢æ˜¾ç¤º(visibleOnAllWorkspaces: true)

#### 1.2 äº¤äº’é€»è¾‘(åŸºäºæ—¶é—´åˆ¤æ–­)

**ç‚¹å‡»æ£€æµ‹**ï¼š
```javascript
const LONG_PRESS_THRESHOLD = 200; // 200ms

mousedown â†’ è®°å½•æ—¶é—´å’Œä½ç½®
mousemove â†’ å¦‚æœè¶…è¿‡200ms,æ ‡è®°ä¸ºæ‹–åŠ¨
mouseup â†’ åˆ¤æ–­ï¼š
  - å¦‚æœæ‹–åŠ¨ä¸­ â†’ åœæ­¢æ‹–åŠ¨,ä¿å­˜ä½ç½®
  - å¦‚æœæ—¶é—´ < 200ms â†’ æ‰“å¼€å¯¹è¯æ¡†
  - å¦åˆ™ â†’ æ— æ“ä½œ

contextmenu â†’ æ˜¾ç¤ºå³é”®èœå•(é€€å‡ºæŒ‰é’®)
```

**è°ƒè¯•æ—¥å¿—**ï¼š
- ğŸ–±ï¸ é¼ æ ‡æŒ‰ä¸‹
- ğŸ”„ å¼€å§‹æ‹–åŠ¨
- âœ… æ‹–åŠ¨ç»“æŸ,ä¿å­˜ä½ç½®
- ğŸ‘† ç‚¹å‡»æ“ä½œ - æ‰“å¼€å¯¹è¯æ¡†

#### 1.3 æ‹–åŠ¨å®ç°
- å®Œå…¨ç§»é™¤ `-webkit-app-region`
- JavaScript æ‰‹åŠ¨å®ç°æ‹–åŠ¨
- é€šè¿‡ IPC é€šçŸ¥ä¸»è¿›ç¨‹ç§»åŠ¨çª—å£
- é˜»æ­¢å›¾ç‰‡é»˜è®¤æ‹–æ‹½è¡Œä¸º
- è‡ªåŠ¨ä¿å­˜æ–°ä½ç½®åˆ°é…ç½®

#### 1.4 ä½ç½®è®¡ç®—ä¸ä¿å­˜
```javascript
// åˆå§‹ä½ç½®(å³ä¸‹è§’)
const x = screenWidth - windowWidth - margin;
const y = screenHeight - windowHeight - margin;

// æ‹–åŠ¨åä¿å­˜
await configManager.set('petPosition', { x, y });
```

---

### 2. å¯¹è¯çª—å£æ¨¡å—

#### 2.1 çª—å£è®¾è®¡
- **å°ºå¯¸**ï¼š800x600 åƒç´ (å¸¦ä¼šè¯åˆ—è¡¨) / 400x600(æ— ä¼šè¯åˆ—è¡¨)
- **ä½ç½®**ï¼šæ™ºèƒ½å®šä½åœ¨å® ç‰©å›¾æ ‡ä¸Šæ–¹
- **ç‰¹æ€§**ï¼š
  - æ™®é€šçª—å£(éç½®é¡¶)
  - å¯æœ€å°åŒ–ã€å…³é—­
  - ä¸å¯æœ€å¤§åŒ–
  - è‡ªåŠ¨èšç„¦è¾“å…¥æ¡†
  - å·¦ä¾§ä¼šè¯åˆ—è¡¨(å¯æŠ˜å )

#### 2.2 æ™ºèƒ½å®šä½ç®—æ³•
```javascript
// åŸºæœ¬ä½ç½®ï¼šå›¾æ ‡ä¸Šæ–¹,æ°´å¹³å±…ä¸­
x = petX + (petWidth - chatWidth) / 2;
y = petY - chatHeight - margin;

// è¾¹ç•Œæ£€æŸ¥
if (x < 0) x = 10;
if (x + chatWidth > screenWidth) x = screenWidth - chatWidth - 10;

// å¦‚æœä¸Šæ–¹ç©ºé—´ä¸å¤Ÿ,æ”¾åœ¨ä¸‹æ–¹
if (y < 0) {
  y = petY + petHeight + margin;
}
```

#### 2.3 UIç»„ä»¶ç»“æ„
```
å¯¹è¯çª—å£
â”œâ”€â”€ æ ‡é¢˜æ 
â”‚   â”œâ”€â”€ æ–°å»ºä¼šè¯æŒ‰é’®
â”‚   â”œâ”€â”€ å›¾æ ‡ + æ ‡é¢˜
â”‚   â”œâ”€â”€ è®¾ç½®æŒ‰é’®
â”‚   â””â”€â”€ å…³é—­æŒ‰é’®
â”œâ”€â”€ ä¸»ä½“åŒºåŸŸ(Flexå¸ƒå±€)
â”‚   â”œâ”€â”€ å·¦ä¾§ä¼šè¯åˆ—è¡¨(å¯é€‰æ˜¾ç¤º)
â”‚   â”‚   â”œâ”€â”€ ä¼šè¯åˆ—è¡¨åˆ‡æ¢æŒ‰é’®
â”‚   â”‚   â”œâ”€â”€ ä¼šè¯é¡¹åˆ—è¡¨
â”‚   â”‚   â”‚   â”œâ”€â”€ ä¼šè¯åç§°
â”‚   â”‚   â”‚   â”œâ”€â”€ æœ€åæ¶ˆæ¯é¢„è§ˆ
â”‚   â”‚   â”‚   â””â”€â”€ åˆ é™¤æŒ‰é’®
â”‚   â”‚   â””â”€â”€ æ»šåŠ¨å®¹å™¨
â”‚   â””â”€â”€ å³ä¾§å¯¹è¯åŒºåŸŸ
â”‚       â”œâ”€â”€ æ¶ˆæ¯åˆ—è¡¨åŒºåŸŸ(å¯æ»šåŠ¨)
â”‚       â”‚   â”œâ”€â”€ ç”¨æˆ·æ¶ˆæ¯
â”‚       â”‚   â”‚   â”œâ”€â”€ æ–‡æœ¬å†…å®¹
â”‚       â”‚   â”‚   â””â”€â”€ å›¾ç‰‡é¢„è§ˆ(æ”¯æŒå¤šå¼ )
â”‚       â”‚   â””â”€â”€ AIæ¶ˆæ¯
â”‚       â”‚       â”œâ”€â”€ Markdownå†…å®¹
â”‚       â”‚       â”œâ”€â”€ ä»£ç é«˜äº®
â”‚       â”‚       â””â”€â”€ å¤åˆ¶æŒ‰é’®
â”‚       â””â”€â”€ è¾“å…¥åŒºåŸŸ
â”‚           â”œâ”€â”€ æ–‡æœ¬è¾“å…¥æ¡†(è‡ªåŠ¨èšç„¦)
â”‚           â”œâ”€â”€ é€‰é¡¹å¤é€‰æ¡†
â”‚           â”‚   â”œâ”€â”€ ğŸ“· åŒ…å«å½“å‰æˆªå›¾
â”‚           â”‚   â””â”€â”€ ğŸ“‹ ç²˜è´´æ¿æˆªå›¾
â”‚           â””â”€â”€ å‘é€æŒ‰é’®
```

#### 2.4 è‡ªåŠ¨èšç„¦å®ç°
```typescript
const textareaRef = React.useRef<HTMLTextAreaElement>(null);

React.useEffect(() => {
  textareaRef.current?.focus();
}, []);
```

---

### 3. å±å¹•æˆªå›¾æ¨¡å—

#### 3.1 æ™ºèƒ½çª—å£è¯†åˆ«
```typescript
// 1. è·å–æ‰€æœ‰çª—å£å’Œå±å¹•æº
const sources = await desktopCapturer.getSources({
  types: ['window', 'screen'],
  thumbnailSize: { width: 3840, height: 2160 },  // 4Kåˆ†è¾¨ç‡
});

// 2. è¿‡æ»¤æ‰çµæè‡ªå·±çš„çª—å£
const windowSources = sources.filter(source => {
  const name = source.name.toLowerCase();
  return !name.includes('lingxi') &&
         !name.includes('çµæ') &&
         source.id.startsWith('window:');
});

// 3. é€‰æ‹©ç¬¬ä¸€ä¸ªéçµæçª—å£(é€šå¸¸æ˜¯ç”¨æˆ·æ­£åœ¨ä½¿ç”¨çš„çª—å£)
const targetWindow = windowSources[0];
```

#### 3.2 å›¾ç‰‡å‹ç¼©ä¼˜åŒ–
```typescript
// 1. è·å–åŸå§‹æˆªå›¾
const screenshot = targetWindow.thumbnail;

// 2. ç¼©æ”¾åˆ°50%
const originalSize = screenshot.getSize();
const newWidth = Math.floor(originalSize.width * 0.5);
const newHeight = Math.floor(originalSize.height * 0.5);
const resized = screenshot.resize({ width: newWidth, height: newHeight });

// 3. è½¬æ¢ä¸ºJPEGæ ¼å¼,è´¨é‡80%
const jpeg = resized.toJPEG(80);
const base64 = jpeg.toString('base64');

// å‹ç¼©æ•ˆæœï¼š6-8MB â†’ 300-500KB(çº¦95%å‹ç¼©ç‡)
return `data:image/jpeg;base64,${base64}`;
```

#### 3.3 å›¾ç‰‡å¤„ç†
- **æ ¼å¼**ï¼šJPEG(åŸPNG)
- **è´¨é‡**ï¼š80%
- **åˆ†è¾¨ç‡**ï¼šç¼©æ”¾åˆ°50%(4K â†’ 1080p)
- **ç¼–ç **ï¼šBase64
- **å­˜å‚¨**ï¼šå†…å­˜ä¸­ä¸´æ—¶ä¿å­˜
- **æ¸…ç†**ï¼šå‘é€åç«‹å³é‡Šæ”¾
- **ä¼˜åŠ¿**ï¼šé¿å…APIé™åˆ¶(6MB),æå‡ä¼ è¾“é€Ÿåº¦

---

### 4. ç²˜è´´æ¿æ¨¡å—

#### 4.1 è¯»å–å®ç°
ä½¿ç”¨ Electron çš„ `clipboard` APIï¼š
```typescript
const image = clipboard.readImage();
if (image.isEmpty()) return null;

const png = image.toPNG();
const base64 = png.toString('base64');
return `data:image/png;base64,${base64}`;
```

#### 4.2 ç²˜è´´æ¿ç›‘å¬
- ä½¿ç”¨ `clipboardMonitor.ts` å®ç°
- å®šæ—¶æ£€æŸ¥ç²˜è´´æ¿å˜åŒ–
- æ”¯æŒå›¾ç‰‡å†…å®¹è¯†åˆ«
- è‡ªåŠ¨é€šçŸ¥æ¸²æŸ“è¿›ç¨‹

---

### 5. ä¼šè¯ç®¡ç†æ¨¡å—

#### 5.1 æ•°æ®ç»“æ„
```typescript
interface Session {
  id: string;                      // ä¼šè¯å”¯ä¸€ID
  name: string;                    // ä¼šè¯åç§°
  messages: Message[];             // æ¶ˆæ¯å†å²
  createdAt: number;               // åˆ›å»ºæ—¶é—´
  updatedAt: number;               // æ›´æ–°æ—¶é—´
  backgroundKnowledge?: string;    // èƒŒæ™¯çŸ¥è¯†
}

interface Message {
  id: string;
  role: 'user' | 'assistant' | 'system' | 'tool';
  content: string | null;
  imageUrls?: string[];           // çª—å£æˆªå›¾
  screenshotImageUrls?: string[]; // å¤‡ç”¨æˆªå›¾å­—æ®µ
  clipboardImageUrls?: string[];  // ç²˜è´´æ¿æˆªå›¾
  timestamp: number;
  tool_calls?: ToolCall[];        // AIå·¥å…·è°ƒç”¨
  tool_call_id?: string;          // å·¥å…·è°ƒç”¨ID
}
```

#### 5.2 ä¼šè¯å­˜å‚¨
- **å­˜å‚¨è·¯å¾„**ï¼š`~/Library/Application Support/lingxi/sessions/`
- **æ–‡ä»¶æ ¼å¼**ï¼šJSON
- **æ–‡ä»¶å‘½å**ï¼š`session-{id}.json`
- **è‡ªåŠ¨ä¿å­˜**ï¼šæ¯5ç§’æ£€æŸ¥å¹¶ä¿å­˜æœ‰å˜åŒ–çš„ä¼šè¯
- **æŒä¹…åŒ–ç­–ç•¥**ï¼šelectron-store + æ–‡ä»¶ç³»ç»Ÿ

#### 5.3 ä¼šè¯æ“ä½œ
```typescript
// åˆ›å»ºä¼šè¯
const newSession = await sessionManager.createSession();

// åˆ‡æ¢ä¼šè¯
await sessionManager.switchSession(sessionId);

// åˆ é™¤ä¼šè¯
await sessionManager.deleteSession(sessionId);

// è·å–ä¼šè¯åˆ—è¡¨
const sessions = await sessionManager.listSessions();

// å‘é€æ¶ˆæ¯
await sessionManager.sendMessage(sessionId, message);
```

#### 5.4 è‡ªåŠ¨ä¿å­˜æœºåˆ¶
```typescript
// autoSaveManager.ts
setInterval(async () => {
  const dirtySessionIds = sessionManager.getDirtySessionIds();
  for (const sessionId of dirtySessionIds) {
    await sessionManager.saveSession(sessionId);
  }
}, 5000); // æ¯5ç§’ä¿å­˜ä¸€æ¬¡
```

---

### 6. AIå¯¹è¯æ¨¡å—

#### 6.1 IdeaLab APIé›†æˆ

**ä½¿ç”¨ OpenAI TypeScript SDK**ï¼š
```typescript
import OpenAI from 'openai';

const client = new OpenAI({
  apiKey: userConfig.apiKey,
  baseURL: 'https://idealab.alibaba-inc.com/api/openai/v1'
});

// æµå¼å“åº”
const stream = await client.chat.completions.create({
  model: "qwen-vl-max-latest",
  messages: chatMessages,
  stream: true,
  tools: availableTools, // AIå·¥å…·å‡½æ•°
});

for await (const chunk of stream) {
  const content = chunk.choices[0]?.delta?.content || '';
  const toolCalls = chunk.choices[0]?.delta?.tool_calls;

  if (content) {
    yield { type: 'content', content };
  }
  if (toolCalls) {
    yield { type: 'tool_calls', toolCalls };
  }
}
```

#### 6.2 å¤šå›¾ç‰‡æ”¯æŒ
```typescript
// ç”¨æˆ·æ¶ˆæ¯å¯ä»¥åŒ…å«å¤šå¼ å›¾ç‰‡
{
  role: "user",
  content: [
    { type: "text", text: "ç”¨æˆ·é—®é¢˜" },
    { type: "image_url", image_url: { url: "data:image/png;base64,..." } },
    { type: "image_url", image_url: { url: "data:image/png;base64,..." } }
  ]
}
```

#### 6.3 æ™ºèƒ½ä¸Šä¸‹æ–‡ç®¡ç†(v3.1ä¼˜åŒ–) â­

**æ ¸å¿ƒæ–¹æ¡ˆ**ï¼šä¼˜å…ˆç§»é™¤å›¾ç‰‡ç­–ç•¥ = åŠ¨æ€è®¡ç®— + 85%ç›®æ ‡çª—å£ + å›¾ç‰‡ä¼˜å…ˆè£å‰ª + Tokenè£å‰ª

##### 6.3.1 åƒé—®maxæ¨¡å‹å‚æ•°
```typescript
const QWEN_MAX_CONFIG = {
  contextWindow: 131072,  // ä¸Šä¸‹æ–‡çª—å£
  maxInput: 129024,       // æœ€å¤§è¾“å…¥tokens
  maxOutput: 8192,        // æœ€å¤§è¾“å‡ºtokens
  targetRatio: 0.85,      // ç›®æ ‡çª—å£æ¯”ä¾‹(85%)
};
```

##### 6.3.2 Tokenä¼°ç®—å™¨(`tokenEstimator.ts`)

**åŠŸèƒ½**ï¼š
- ä¼°ç®—æ–‡æœ¬tokens(1.5å­—ç¬¦/token)
- ä¼°ç®—å›¾ç‰‡tokens(1500 tokens/å¼ )
- æ”¯æŒçª—å£æˆªå›¾å’Œç²˜è´´æ¿æˆªå›¾
- è®¡ç®—æ¶ˆæ¯åˆ—è¡¨æ€»tokens

**å®ç°**ï¼š
```typescript
export function estimateMessageTokens(message: Message): TokenEstimate {
  let textTokens = 0;
  let imageTokens = 0;

  // æ–‡å­—tokenä¼°ç®—
  if (message.content) {
    textTokens = Math.ceil(message.content.length / 1.5);
  }

  // å›¾ç‰‡tokenä¼°ç®—(qwen-vl-maxçº¦1500 tokens/å¼ )
  if (message.imageUrls && message.imageUrls.length > 0) {
    imageTokens = message.imageUrls.length * 1500;
  }

  return {
    text: textTokens,
    images: imageTokens,
    total: textTokens + imageTokens,
  };
}
```

##### 6.3.3 ä¸Šä¸‹æ–‡ç®¡ç†å™¨(`contextManager.ts`)

**æ™ºèƒ½è£å‰ªæµç¨‹(v3.1ä¼˜åŒ–)**ï¼š

```typescript
1. åŠ¨æ€è®¡ç®—å¯ç”¨ç©ºé—´
   å¯ç”¨ = 129,024 - 8,192(è¾“å‡º) - 500(ç³»ç»Ÿ) - çŸ¥è¯† - å½“å‰æ¶ˆæ¯

2. è®¾ç½®ç›®æ ‡çª—å£(85%)
   ç›®æ ‡ = å¯ç”¨ç©ºé—´ Ã— 0.85

3. è®¡ç®—å†å²tokenså’Œè¯·æ±‚ä½“å¤§å°
   éå†æ‰€æœ‰å†å²æ¶ˆæ¯,ç´¯åŠ tokenså’Œå­—èŠ‚æ•°

4. åˆ¤æ–­æ˜¯å¦éœ€è¦è£å‰ª
   if (å†å² > ç›®æ ‡ || è¯·æ±‚ä½“ > 5MB) â†’ è£å‰ª
   else â†’ ä¿ç•™å…¨éƒ¨

5. ç­–ç•¥1ï¼šä¼˜å…ˆç§»é™¤æ—§å›¾ç‰‡(ä¿ç•™æœ€æ–°1å¼ )
   - æ‰¾åˆ°æœ€åä¸€æ¡æœ‰å›¾ç‰‡çš„æ¶ˆæ¯
   - ç§»é™¤ä¹‹å‰æ‰€æœ‰æ¶ˆæ¯çš„å›¾ç‰‡(ä¿ç•™æ–‡å­—)
   - é‡æ–°è®¡ç®—tokenså’Œè¯·æ±‚ä½“å¤§å°
   - å¦‚æœæ»¡è¶³é™åˆ¶ â†’ è¿”å›ç»“æœ âœ…

6. ç­–ç•¥2ï¼šå¦‚æœè¿˜è¶…é™,ç§»é™¤æ•´æ¡æ¶ˆæ¯
   - ä»æœ€æ–°æ¶ˆæ¯å¼€å§‹å¾€å‰ç´¯åŠ 
   - ç›´åˆ°è¾¾åˆ°ç›®æ ‡çª—å£
```

**v3.1æ ¸å¿ƒä¼˜åŒ–**ï¼š

**ä¸ºä»€ä¹ˆä¼˜å…ˆç§»é™¤å›¾ç‰‡ï¼Ÿ**
1. **å›¾ç‰‡å ç”¨å¤§é‡token**ï¼šæ¯å¼ å›¾ç‰‡çº¦1500 tokens,è€Œæ–‡å­—åªéœ€1.5å­—ç¬¦/token
2. **å›¾ç‰‡é€šå¸¸åªåœ¨å½“æ—¶æœ‰ç”¨**ï¼šåç»­å¯¹è¯ä¸»è¦ä¾èµ–æ–‡å­—ä¸Šä¸‹æ–‡
3. **ä¿ç•™æ›´é•¿çš„å¯¹è¯å†å²**ï¼šç§»é™¤å›¾ç‰‡åå¯ä»¥ä¿ç•™æ›´å¤šè½®æ–‡å­—å¯¹è¯
4. **ç¬¦åˆå®é™…ä½¿ç”¨åœºæ™¯**ï¼šç”¨æˆ·æ›´å…³å¿ƒå¯¹è¯å†…å®¹,è€Œä¸æ˜¯æ—§å›¾ç‰‡

**ä¼˜åŒ–å‰åå¯¹æ¯”**ï¼š

```
ä¹‹å‰çš„ç­–ç•¥(æ•´ä½“æ»‘åŠ¨çª—å£)ï¼š
æ¶ˆæ¯1: æ–‡å­—(100) + å›¾ç‰‡(5000) = 5100 tokens âŒ ç§»é™¤
æ¶ˆæ¯2: æ–‡å­—(100) + å›¾ç‰‡(5000) = 5100 tokens âŒ ç§»é™¤
æ¶ˆæ¯3: æ–‡å­—(100) + å›¾ç‰‡(5000) = 5100 tokens âœ… ä¿ç•™
æ¶ˆæ¯4: æ–‡å­—(100) + å›¾ç‰‡(5000) = 5100 tokens âœ… ä¿ç•™
æ¶ˆæ¯5: æ–‡å­—(100) + å›¾ç‰‡(5000) = 5100 tokens âœ… ä¿ç•™
ç»“æœï¼šä¿ç•™3æ¡å®Œæ•´æ¶ˆæ¯,15,300 tokens

ç°åœ¨çš„ç­–ç•¥(ä¼˜å…ˆç§»é™¤å›¾ç‰‡)ï¼š
æ¶ˆæ¯1: æ–‡å­—(100) âœ… [å›¾ç‰‡å·²ç§»é™¤]
æ¶ˆæ¯2: æ–‡å­—(100) âœ… [å›¾ç‰‡å·²ç§»é™¤]
æ¶ˆæ¯3: æ–‡å­—(100) âœ… [å›¾ç‰‡å·²ç§»é™¤]
æ¶ˆæ¯4: æ–‡å­—(100) âœ… [å›¾ç‰‡å·²ç§»é™¤]
æ¶ˆæ¯5: æ–‡å­—(100) + å›¾ç‰‡(5000) = 5100 tokens âœ… [ä¿ç•™æœ€æ–°å›¾ç‰‡]
ç»“æœï¼šä¿ç•™5æ¡æ¶ˆæ¯(4æ¡çº¯æ–‡å­— + 1æ¡å¸¦å›¾ç‰‡),5,500 tokens

ä¼˜åŠ¿ï¼š
âœ… å¯¹è¯å†å²ï¼š3è½® â†’ 5è½®(æå‡67%)
âœ… Tokenä½¿ç”¨ï¼š15,300 â†’ 5,500(èŠ‚çœ64%)
âœ… ä¸Šä¸‹æ–‡æ›´å®Œæ•´ï¼šAIèƒ½çœ‹åˆ°æ›´å¤šè½®å¯¹è¯
```

**æ ¸å¿ƒç‰¹ç‚¹**ï¼š
- âœ… å®Œå…¨åŸºäºtokenå¤§å°,ä¸æ˜¯æ¶ˆæ¯æ•°é‡
- âœ… åŠ¨æ€é€‚åº”å„ç§åœºæ™¯(çº¯æ–‡å­—/å›¾ç‰‡/æ··åˆ)
- âœ… æ²¡æœ‰ç¡¬æ€§çš„æœ€å°æ¶ˆæ¯æ•°é™åˆ¶
- âœ… é™é»˜å¤„ç†,ç”¨æˆ·æ— æ„ŸçŸ¥
- âœ… ä»…æ—¥å¿—è¾“å‡º,ä¾¿äºè°ƒè¯•

---

### 7. å‘½ä»¤æ‰§è¡Œæ¨¡å—

#### 7.1 AIå·¥å…·å‡½æ•°å®šä¹‰
```typescript
const tools = [
  {
    type: "function",
    function: {
      name: "execute_command",
      description: "æ‰§è¡Œç³»ç»Ÿå‘½ä»¤",
      parameters: {
        type: "object",
        properties: {
          command: {
            type: "string",
            description: "è¦æ‰§è¡Œçš„å‘½ä»¤"
          },
          args: {
            type: "array",
            items: { type: "string" },
            description: "å‘½ä»¤å‚æ•°"
          }
        },
        required: ["command"]
      }
    }
  }
];
```

#### 7.2 å‘½ä»¤å®‰å…¨éªŒè¯
```typescript
// commandSecurity.ts
export function validateCommand(command: string, args: string[]): {
  safe: boolean;
  reason?: string;
} {
  // å±é™©å‘½ä»¤é»‘åå•
  const dangerousCommands = [
    'rm', 'sudo', 'chmod', 'chown',
    'dd', 'mkfs', 'fdisk',
    'kill', 'killall', 'pkill'
  ];

  if (dangerousCommands.includes(command)) {
    return {
      safe: false,
      reason: `å‘½ä»¤ ${command} è¢«ç¦æ­¢æ‰§è¡Œ(å®‰å…¨é™åˆ¶)`
    };
  }

  return { safe: true };
}
```

#### 7.3 å‘½ä»¤æ‰§è¡Œæµç¨‹
```typescript
// 1. AIç”Ÿæˆtool_calls
tool_calls: [{
  id: "call_xxx",
  function: {
    name: "execute_command",
    arguments: '{"command":"ls","args":["-la"]}'
  }
}]

// 2. å®‰å…¨éªŒè¯
const validation = validateCommand(command, args);
if (!validation.safe) {
  return { error: validation.reason };
}

// 3. æ‰§è¡Œå‘½ä»¤
const result = await commandExecutor.execute(command, args);

// 4. è¿”å›ç»“æœç»™AI
{
  role: "tool",
  tool_call_id: "call_xxx",
  content: JSON.stringify(result)
}
```

---

### 8. MCPåè®®æ¨¡å— â­ NEW

#### 8.1 MCP SDKé›†æˆ

**æ ¸å¿ƒç»„ä»¶**ï¼š
```typescript
// å®˜æ–¹SDKé›†æˆ
import { Client } from '@modelcontextprotocol/sdk/client/index.js';
import { StreamableHTTPClientTransport } from '@modelcontextprotocol/sdk/client/streamableHttp.js';
```

#### 8.2 æ”¯æŒçš„MCPæœåŠ¡å™¨ç±»å‹

**HTTPä¼ è¾“**ï¼š
- æ ‡å‡†HTTP/HTTPSè¿æ¥
- æ”¯æŒæµå¼å“åº”(SSE)
- è‡ªå®šä¹‰headerså’Œè¶…æ—¶è®¾ç½®

**OAuth 2.1è®¤è¯**ï¼š
- å®Œæ•´çš„PKCEæˆæƒç æµç¨‹
- Resource Indicators (RFC 8707)
- è‡ªåŠ¨tokenåˆ·æ–°æœºåˆ¶
- æˆæƒæœåŠ¡å™¨è‡ªåŠ¨å‘ç°

#### 8.3 MCPé…ç½®ç»“æ„

```typescript
interface MCPServerConfig {
  id: string;
  name: string;
  url: string;
  type: 'http' | 'sse';
  enabled: boolean;
  headers?: Record<string, string>;

  // OAuth 2.1é…ç½®
  oauth?: {
    authUrl: string;      // æˆæƒç«¯ç‚¹
    tokenUrl: string;     // Tokenç«¯ç‚¹
    clientId: string;     // å®¢æˆ·ç«¯ID
    clientSecret?: string;
    scopes: string[];
    redirectUri: string;
    resource?: string;    // RFC 8707 Resourceå‚æ•°
  };

  // OAuth tokensï¼ˆè‡ªåŠ¨ç®¡ç†ï¼‰
  tokens?: {
    access_token: string;
    refresh_token?: string;
    expires_at?: number;
    token_type: string;
  };
}
```

#### 8.4 MCPç®¡ç†å™¨

**æ–‡ä»¶**: `electron/mcpManager.ts`

**æ ¸å¿ƒåŠŸèƒ½**ï¼š
```typescript
class MCPManager {
  // åŠ è½½é…ç½®çš„æœåŠ¡å™¨
  async loadServers(configs: MCPServerConfig[]): Promise<void>

  // æ·»åŠ MCPæœåŠ¡å™¨
  async addServer(config: MCPServerConfig): Promise<void>

  // OAuthæˆæƒæµç¨‹
  async authorizeServer(config: MCPServerConfig): Promise<void>

  // ç¡®ä¿tokenæœ‰æ•ˆ
  async ensureValidToken(config: MCPServerConfig): Promise<void>

  // è·å–æ‰€æœ‰å¯ç”¨å·¥å…·
  async getAllTools(): Promise<Tool[]>

  // è°ƒç”¨MCPå·¥å…·
  async callTool(serverId: string, toolName: string, args: any): Promise<any>
}
```

#### 8.5 OAuth 2.1è®¤è¯æµç¨‹

**å®Œæ•´å®ç°** (å‚è§ docs/MCP_AUTH_FIX_SUMMARY.md):

```typescript
// 1. æˆæƒæœåŠ¡å™¨å‘ç°
const discovery = await discoverAuthorizationServer(mcpServerUrl);

// 2. åŠ¨æ€å®¢æˆ·ç«¯æ³¨å†Œï¼ˆå¯é€‰ï¼‰
if (authServerMetadata.registration_endpoint) {
  const client = await registerClient(registration_endpoint);
}

// 3. PKCEæˆæƒç æµç¨‹
const { code_verifier, code_challenge } = generatePKCE();
const authUrl = buildAuthUrl({
  code_challenge,
  resource: mcpServerUrl,
  state: randomState
});

// 4. Tokenäº¤æ¢
const tokens = await exchangeToken({
  code,
  code_verifier,
  resource: mcpServerUrl
});

// 5. Tokenä½¿ç”¨
headers['Authorization'] = `Bearer ${tokens.access_token}`;
```

**å…³é”®å®‰å…¨ç‰¹æ€§**ï¼š
- âœ… PKCE S256ï¼ˆé˜²æ­¢æˆæƒç æ‹¦æˆªï¼‰
- âœ… Stateå‚æ•°ï¼ˆé˜²æ­¢CSRFï¼‰
- âœ… Resourceå‚æ•°ï¼ˆtokenä¸æœåŠ¡å™¨ç»‘å®šï¼‰
- âœ… è‡ªåŠ¨tokenåˆ·æ–°
- âœ… æœ¬åœ°åŠ å¯†å­˜å‚¨

#### 8.6 å·¥å…·è°ƒç”¨æµç¨‹

```typescript
// 1. AIè¯·æ±‚è°ƒç”¨å·¥å…·
tool_calls: [{
  id: "call_xxx",
  function: {
    name: "mcp__server-id__tool-name",
    arguments: '{"arg1":"value1"}'
  }
}]

// 2. è§£æå·¥å…·è°ƒç”¨
const [prefix, serverId, ...toolNameParts] = name.split('__');
const toolName = toolNameParts.join('__');

// 3. è°ƒç”¨MCPæœåŠ¡å™¨
const result = await mcpManager.callTool(serverId, toolName, args);

// 4. è¿”å›ç»“æœç»™AI
{
  role: "tool",
  tool_call_id: "call_xxx",
  content: JSON.stringify(result)
}
```

#### 8.7 MCP UIç•Œé¢

**é…ç½®ç®¡ç†çª—å£** (`src/renderer/components/McpConfig.tsx`):
- MCPæœåŠ¡å™¨åˆ—è¡¨
- æ·»åŠ /ç¼–è¾‘/åˆ é™¤æœåŠ¡å™¨
- OAuthæˆæƒæŒ‰é’®
- è¿æ¥çŠ¶æ€æ˜¾ç¤º
- å·¥å…·åˆ—è¡¨é¢„è§ˆ

**å¯¹è¯ç•Œé¢é›†æˆ**:
- MCPå·¥å…·è‡ªåŠ¨é›†æˆåˆ°AIå·¥å…·åˆ—è¡¨
- å·¥å…·åç§°å‰ç¼€ï¼š`mcp__server-id__tool-name`
- å®æ—¶å·¥å…·è°ƒç”¨æ—¥å¿—
- ç»“æœè‡ªåŠ¨ä¼ å›AI

#### 8.8 MCPå·¥å…·åˆ†ç±»

**æœ¬åœ°å·¥å…·** (6ä¸ª):
- `local_execute_command` - æ‰§è¡Œç³»ç»Ÿå‘½ä»¤
- `local_read_clipboard` - è¯»å–å‰ªè´´æ¿
- `local_take_screenshot` - æˆªå–å±å¹•
- `local_search_web` - ç½‘ç»œæœç´¢
- `local_get_current_time` - è·å–æ—¶é—´
- `local_calculate` - æ•°å­¦è®¡ç®—

**MCPå·¥å…·** (48ä¸ªï¼Œæ¥è‡ªå¤šä¸ªæœåŠ¡å™¨):
- å‰ç¼€æ ¼å¼ï¼š`mcp__æœåŠ¡å™¨ID__å·¥å…·åç§°`
- ç¤ºä¾‹ï¼š`mcp__formal-skyline__exSwitchList`
- è‡ªåŠ¨ä»é…ç½®çš„MCPæœåŠ¡å™¨åŠ è½½

#### 8.9 é”™è¯¯å¤„ç†

| åœºæ™¯ | å¤„ç†ç­–ç•¥ |
|------|---------|
| OAuthæœªé…ç½® | æç¤ºç”¨æˆ·é…ç½®OAuth |
| Tokenè¿‡æœŸ | è‡ªåŠ¨åˆ·æ–°token |
| åˆ·æ–°å¤±è´¥ | è§¦å‘é‡æ–°æˆæƒ |
| æœåŠ¡å™¨ç¦»çº¿ | æ ‡è®°çŠ¶æ€ï¼Œè·³è¿‡è¿æ¥ |
| å·¥å…·è°ƒç”¨å¤±è´¥ | è¿”å›é”™è¯¯ä¿¡æ¯ç»™AI |

---

### 9. BUCè®¤è¯æ¨¡å—

#### 9.1 è®¤è¯æµç¨‹
```typescript
// bucAuth.ts
export async function login(): Promise<{
  apiKey: string;
  userInfo: UserInfo;
}> {
  // 1. æ‰“å¼€BUCç™»å½•é¡µé¢
  const authUrl = `https://idealab.alibaba-inc.com/api/buc/authorize`;
  shell.openExternal(authUrl);

  // 2. å¯åŠ¨æœ¬åœ°å›è°ƒæœåŠ¡å™¨
  const server = startCallbackServer();

  // 3. ç­‰å¾…å›è°ƒ
  const authCode = await waitForCallback();

  // 4. äº¤æ¢token
  const tokens = await exchangeToken(authCode);

  // 5. è·å–ç”¨æˆ·ä¿¡æ¯
  const userInfo = await getUserInfo(tokens.accessToken);

  // 6. è·å–APIå¯†é’¥
  const apiKey = await getApiKey(tokens.accessToken);

  return { apiKey, userInfo };
}
```

#### 9.2 ç”¨æˆ·ä¿¡æ¯ç®¡ç†
```typescript
interface UserInfo {
  staffId: string;        // å·¥å·
  nickName: string;       // èŠ±å
  email: string;          // é‚®ç®±
  department?: string;    // éƒ¨é—¨
}

// å­˜å‚¨åœ¨é…ç½®ä¸­
await configManager.set('userInfo', userInfo);
```

---

### 10. é…ç½®ç®¡ç†æ¨¡å—

#### 10.1 é…ç½®é¡¹
```typescript
interface AppConfig {
  apiKey: string;                    // IdeaLab APIå¯†é’¥
  model: string;                     // æ¨¡å‹(é»˜è®¤ï¼šqwen-vl-max-latest)
  shortcut: string;                  // å¿«æ·é”®(é»˜è®¤ï¼šCmd+Shift+0)
  petPosition?: { x: number; y: number }; // å® ç‰©ä½ç½®
  userInfo?: UserInfo;               // ç”¨æˆ·ä¿¡æ¯
  lastSessionId?: string;            // æœ€åä½¿ç”¨çš„ä¼šè¯ID
  mcpServers?: MCPServerConfig[];    // MCPæœåŠ¡å™¨é…ç½®åˆ—è¡¨
}
```

#### 10.2 å­˜å‚¨æ–¹å¼
- ä½¿ç”¨ `electron-store`
- æœ¬åœ° JSON æ–‡ä»¶
- ä½ç½®ï¼š`~/Library/Application Support/lingxi/config.json`
- è‡ªåŠ¨åŠ å¯†æ•æ„Ÿä¿¡æ¯

---

## ğŸ”„ æ•°æ®æµè®¾è®¡

### å®Œæ•´äº¤äº’æµç¨‹

```
1. ç”¨æˆ·å”¤é†’
   å·¦é”®å¿«é€Ÿç‚¹å‡»(< 200ms) / æŒ‰ Cmd+Shift+0
        â†“
   å¯¹è¯çª—å£å‡ºç°åœ¨å›¾æ ‡ä¸Šæ–¹
        â†“
   åŠ è½½å½“å‰ä¼šè¯æˆ–åˆ›å»ºæ–°ä¼šè¯
        â†“
   è¾“å…¥æ¡†è‡ªåŠ¨èšç„¦

2. ç”¨æˆ·è¾“å…¥
   è¾“å…¥é—®é¢˜æ–‡æœ¬
        â†“
   é€‰æ‹©æˆªå›¾é€‰é¡¹
   - [x] åŒ…å«å½“å‰æˆªå›¾(æ™ºèƒ½çª—å£è¯†åˆ«)
   - [x] ç²˜è´´æ¿æˆªå›¾(å¯åŒæ—¶é€‰æ‹©)
        â†“
   ç‚¹å‡»å‘é€ / æŒ‰ Enter

3. æ•°æ®æ”¶é›†
   â”œâ”€ ç”¨æˆ·è¾“å…¥æ–‡æœ¬
   â”œâ”€ å½“å‰å±å¹•æˆªå›¾(å¦‚å‹¾é€‰,è‡ªåŠ¨å‹ç¼©)
   â””â”€ ç²˜è´´æ¿æˆªå›¾(å¦‚å‹¾é€‰)
        â†“
   å›¾ç‰‡å¤„ç†
   - Base64ç¼–ç 
   - æ·»åŠ åˆ°æ¶ˆæ¯æ•°ç»„

4. APIè°ƒç”¨
   æ„å»ºè¯·æ±‚
   - ç³»ç»Ÿæç¤ºè¯
   - èƒŒæ™¯çŸ¥è¯†(å¦‚æœ‰)
   - å†å²ä¸Šä¸‹æ–‡(æ™ºèƒ½è£å‰ª)
   - å½“å‰æ¶ˆæ¯(æ–‡æœ¬+å¤šå¼ å›¾ç‰‡)
        â†“
   å‘é€åˆ°åƒé—®API(æµå¼)
        â†“
   æ¥æ”¶æµå¼å“åº”

5. ç»“æœå±•ç¤º
   é€å­—æ˜¾ç¤ºAIå›ç­”
        â†“
   Markdownæ¸²æŸ“(React Markdown)
        â†“
   ä»£ç é«˜äº®(React Syntax Highlighter)
        â†“
   æ˜¾ç¤ºå®Œæˆ,æä¾›å¤åˆ¶æŒ‰é’®

6. å·¥å…·è°ƒç”¨(å¦‚æœ‰)
   AIç”Ÿæˆtool_calls
        â†“
   å®‰å…¨éªŒè¯
        â†“
   æ‰§è¡Œå‘½ä»¤
        â†“
   è¿”å›ç»“æœç»™AI
        â†“
   AIç”Ÿæˆæœ€ç»ˆå›ç­”

7. åç»­æ“ä½œ
   - ç”¨æˆ·å¯ç»§ç»­æé—®(å¤šè½®å¯¹è¯)
   - ç”¨æˆ·å¯å¤åˆ¶å›ç­”
   - ç”¨æˆ·å¯åˆ‡æ¢ä¼šè¯
   - ç”¨æˆ·å¯å…³é—­çª—å£(ä¼šè¯è‡ªåŠ¨ä¿å­˜)
```

---

## ğŸ¨ æŠ€æœ¯æ ˆè¯¦è§£

### æ ¸å¿ƒæ¡†æ¶

#### Electron 28+
- **çª—å£ç®¡ç†**ï¼šBrowserWindow
- **å±å¹•æˆªå›¾**ï¼šdesktopCapturer
- **ç²˜è´´æ¿**ï¼šclipboard
- **å…¨å±€å¿«æ·é”®**ï¼šglobalShortcut
- **IPCé€šä¿¡**ï¼šipcMain / ipcRenderer
- **å¤šæ¡Œé¢æ”¯æŒ**ï¼šsetVisibleOnAllWorkspaces
- **è¿›ç¨‹ç®¡ç†**ï¼šå­è¿›ç¨‹æ‰§è¡Œå‘½ä»¤

#### React 18
- **UIæ¡†æ¶**ï¼šå‡½æ•°ç»„ä»¶ + Hooks
- **çŠ¶æ€ç®¡ç†**ï¼šZustand 4.4.7
- **å…³é”®ç»„ä»¶**ï¼š
  - Appï¼šä¸»åº”ç”¨
  - MessageListï¼šæ¶ˆæ¯åˆ—è¡¨
  - MessageItemï¼šå•æ¡æ¶ˆæ¯
  - InputAreaï¼šè¾“å…¥åŒºåŸŸ
  - SessionHistoryï¼šä¼šè¯å†å²

#### TypeScript 5.3.3
- **ç±»å‹å®‰å…¨**ï¼šä¸¥æ ¼æ¨¡å¼
- **æ¥å£å®šä¹‰**ï¼šå®Œæ•´çš„ç±»å‹å£°æ˜
- **ç±»å‹æ¨å¯¼**ï¼šæ™ºèƒ½æç¤º

#### Tailwind CSS 3.4.0
- **æ ·å¼æ¡†æ¶**ï¼šå®ç”¨ä¼˜å…ˆ
- **å“åº”å¼è®¾è®¡**ï¼šç§»åŠ¨ç«¯é€‚é…
- **è‡ªå®šä¹‰ä¸»é¢˜**ï¼šæ”¯æŒæ·±è‰²æ¨¡å¼

#### å…¶ä»–UIåº“
- **React Markdown 9.0.1**ï¼šMarkdownæ¸²æŸ“
- **React Syntax Highlighter 16.1.0**ï¼šä»£ç é«˜äº®
- **remark-gfm 4.0.1**ï¼šGitHubé£æ ¼Markdown

### AIæœåŠ¡

#### OpenAI SDK 4.20.1
- **æµå¼å“åº”**ï¼šAsyncGenerator
- **å·¥å…·è°ƒç”¨**ï¼šFunction Calling
- **é”™è¯¯å¤„ç†**ï¼šè‡ªåŠ¨é‡è¯•

#### IdeaLab API
- **æ¨¡å‹**ï¼šqwen-vl-max-latest
- **å¤šæ¨¡æ€**ï¼šæ–‡æœ¬ + å›¾ç‰‡
- **ä¸Šä¸‹æ–‡çª—å£**ï¼š131K tokens

### MCPåè®®æ”¯æŒ

#### MCP SDK 1.25.2
- **å®˜æ–¹SDK**ï¼š@modelcontextprotocol/sdk
- **ä¼ è¾“åè®®**ï¼šHTTP/HTTPS + SSE
- **è®¤è¯æ”¯æŒ**ï¼šOAuth 2.1 PKCE
- **å·¥å…·è°ƒç”¨**ï¼šæ ‡å‡†MCPåè®®
- **æµå¼å“åº”**ï¼šStreamableHTTPClientTransport

### æ•°æ®å­˜å‚¨

#### electron-store 8.1.0
- **é…ç½®ç®¡ç†**ï¼šJSONå­˜å‚¨
- **åŠ å¯†æ”¯æŒ**ï¼šæ•æ„Ÿæ•°æ®åŠ å¯†
- **è·¯å¾„ç®¡ç†**ï¼šè‡ªåŠ¨å¤„ç†

#### æ–‡ä»¶ç³»ç»Ÿ
- **ä¼šè¯å­˜å‚¨**ï¼šJSONæ–‡ä»¶
- **è‡ªåŠ¨ä¿å­˜**ï¼šå®šæ—¶æŒä¹…åŒ–
- **æ—¥å¿—è®°å½•**ï¼šelectron-log 5.0.1

---

## ğŸ”’ å®‰å…¨ä¸éšç§

### æ•°æ®å®‰å…¨

#### APIå¯†é’¥ä¿æŠ¤
- æœ¬åœ°åŠ å¯†å­˜å‚¨(electron-store)
- ä¸åœ¨æ—¥å¿—ä¸­è¾“å‡º
- ä¸ä¸Šä¼ åˆ°æœåŠ¡å™¨
- BUCè®¤è¯å®‰å…¨å¯é 

#### æˆªå›¾æ•°æ®
- ä»…å†…å­˜å­˜å‚¨
- å‘é€åç«‹å³æ¸…é™¤
- ä¸ä¿å­˜åˆ°ç£ç›˜
- è‡ªåŠ¨å‹ç¼©ä¼˜åŒ–

#### å¯¹è¯å†å²
- ä¼šè¯æœŸé—´ä¿å­˜
- æœ¬åœ°JSONæ–‡ä»¶
- å¯éšæ—¶åˆ é™¤
- ä¸äº‘ç«¯åŒæ­¥

#### å‘½ä»¤æ‰§è¡Œ
- ä¸¥æ ¼å®‰å…¨éªŒè¯
- å±é™©å‘½ä»¤é»‘åå•
- æ‰§è¡Œæ—¥å¿—è®°å½•
- ç»“æœè¿”å›é™åˆ¶

---

## âš¡ æ€§èƒ½ä¼˜åŒ–

### å†…å­˜ç®¡ç†
- æ™ºèƒ½ä¸Šä¸‹æ–‡è£å‰ª(åŸºäºToken)
- å›¾ç‰‡ç”¨å®Œå³é‡Šæ”¾
- å®šæœŸåƒåœ¾å›æ”¶
- ä¼šè¯æŒ‰éœ€åŠ è½½

### ç½‘ç»œä¼˜åŒ–
- æµå¼å“åº”å‡å°‘ç­‰å¾…
- é”™è¯¯è‡ªåŠ¨é‡è¯•
- è¶…æ—¶æ§åˆ¶
- å›¾ç‰‡å‹ç¼©(95%å‹ç¼©ç‡)

### UIä¼˜åŒ–
- è‡ªåŠ¨èšç„¦è¾“å…¥æ¡†
- æµå¼æ˜¾ç¤ºAIå›ç­”
- é˜²æŠ–èŠ‚æµ
- è™šæ‹Ÿæ»šåŠ¨(å¤§é‡æ¶ˆæ¯æ—¶)

### å­˜å‚¨ä¼˜åŒ–
- å®šæ—¶è‡ªåŠ¨ä¿å­˜(5ç§’)
- ä»…ä¿å­˜æœ‰å˜åŒ–çš„ä¼šè¯
- JSONæ ¼å¼å‹ç¼©
- æ—¥å¿—æ–‡ä»¶è½®è½¬

---

## ğŸ§ª æµ‹è¯•ç­–ç•¥

### åŠŸèƒ½æµ‹è¯•
- âœ… ç‚¹å‡»/é•¿æŒ‰åŒºåˆ†
- âœ… æ‹–åŠ¨åŠŸèƒ½
- âœ… ä½ç½®è®°å¿†
- âœ… å¯¹è¯çª—å£å®šä½
- âœ… æ™ºèƒ½çª—å£æˆªå›¾
- âœ… å›¾ç‰‡å‹ç¼©
- âœ… å¤šå›¾ç‰‡å‘é€
- âœ… AIå¯¹è¯
- âœ… å¤šä¼šè¯ç®¡ç†
- âœ… ä¼šè¯æŒä¹…åŒ–
- âœ… BUCè®¤è¯
- âœ… å‘½ä»¤æ‰§è¡Œ
- âœ… é…ç½®ç®¡ç†

### ç”¨æˆ·ä½“éªŒæµ‹è¯•
- âœ… äº¤äº’æµç•…æ€§
- âœ… é”™è¯¯æç¤ºå‹å¥½æ€§
- âœ… è¾¹ç•Œæƒ…å†µå¤„ç†
- âœ… ä¼šè¯åˆ‡æ¢æµç•…
- âœ… è‡ªåŠ¨ä¿å­˜å¯é 

---

## ğŸ“¦ æ„å»ºä¸å‘å¸ƒ

### å¼€å‘ç¯å¢ƒ
```bash
# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨(ç»ˆç«¯1)
npm run dev

# å¯åŠ¨Electron(ç»ˆç«¯2)
npm run electron:dev
```

### æ„å»ºæ‰“åŒ…
```bash
# æ„å»ºå¹¶æ‰“åŒ…
npm run build
npm run electron:build

# ç”Ÿæˆçš„æ–‡ä»¶
release/
â”œâ”€â”€ çµæ-0.1.0-arm64.dmg              # DMG å®‰è£…åŒ…
â”œâ”€â”€ çµæ-0.1.0-arm64-mac.zip          # ZIP å‹ç¼©åŒ…
â””â”€â”€ mac-arm64/
    â””â”€â”€ çµæ.app                       # åº”ç”¨ç¨‹åº
```

### å®‰è£…æ–¹å¼
```bash
# æ–¹å¼1ï¼šç›´æ¥è¿è¡Œ
open release/mac-arm64/çµæ.app

# æ–¹å¼2ï¼šå®‰è£…åˆ°åº”ç”¨ç¨‹åºæ–‡ä»¶å¤¹
cp -r release/mac-arm64/çµæ.app /Applications/

# æ–¹å¼3ï¼šä½¿ç”¨DMGå®‰è£…åŒ…
open release/çµæ-0.1.0-arm64.dmg
```

---

## ğŸ”§ å¼€å‘è§„èŒƒ

### ä»£ç è§„èŒƒ
- ESLint + Prettier
- TypeScript ä¸¥æ ¼æ¨¡å¼
- ç»„ä»¶åŒ–å¼€å‘
- å‡½æ•°å¼ç¼–ç¨‹ä¼˜å…ˆ

### Gitè§„èŒƒ
- è¯­ä¹‰åŒ–æäº¤ä¿¡æ¯
- åŠŸèƒ½åˆ†æ”¯å¼€å‘
- Code Review
- æ–‡æ¡£åŒæ­¥æ›´æ–°

### æ–‡ä»¶ç»„ç»‡
```
electron/                  # ä¸»è¿›ç¨‹ä»£ç 
â”œâ”€â”€ main.ts               # å…¥å£æ–‡ä»¶
â”œâ”€â”€ windowManager.ts      # çª—å£ç®¡ç†
â”œâ”€â”€ ipcHandlers.ts        # IPCå¤„ç†
â”œâ”€â”€ sessionManager.ts     # ä¼šè¯ç®¡ç†
â”œâ”€â”€ bucAuth.ts            # BUCè®¤è¯
â”œâ”€â”€ commandExecutor.ts    # å‘½ä»¤æ‰§è¡Œ
â”œâ”€â”€ commandSecurity.ts    # å‘½ä»¤å®‰å…¨
â”œâ”€â”€ configManager.ts      # é…ç½®ç®¡ç†
â”œâ”€â”€ autoSaveManager.ts    # è‡ªåŠ¨ä¿å­˜
â””â”€â”€ ...

src/renderer/             # æ¸²æŸ“è¿›ç¨‹ä»£ç 
â”œâ”€â”€ components/           # UIç»„ä»¶
â”œâ”€â”€ store/                # çŠ¶æ€ç®¡ç†
â”œâ”€â”€ utils/                # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ aiService.ts      # AIæœåŠ¡
â”‚   â”œâ”€â”€ contextManager.ts # ä¸Šä¸‹æ–‡ç®¡ç†
â”‚   â”œâ”€â”€ tokenEstimator.ts # Tokenä¼°ç®—
â”‚   â””â”€â”€ ...
â””â”€â”€ ...
```

---

## ğŸ“Š ç›‘æ§ä¸æ—¥å¿—

### æ—¥å¿—è®°å½•
- ä½¿ç”¨ electron-log
- åˆ†çº§è®°å½•(info/warn/error)
- ä½ç½®ï¼š`~/Library/Logs/lingxi/`
- æ—¥å¿—è½®è½¬ï¼šæŒ‰å¤§å°è‡ªåŠ¨åˆ‡åˆ†

### è°ƒè¯•ä¿¡æ¯
- æ§åˆ¶å°è¾“å‡ºäº¤äº’çŠ¶æ€
- Tokenä½¿ç”¨æƒ…å†µ
- ä¸Šä¸‹æ–‡è£å‰ªè¯¦æƒ…
- å‘½ä»¤æ‰§è¡Œè®°å½•
- ä¾¿äºé—®é¢˜æ’æŸ¥

### æ€§èƒ½ç›‘æ§
- Tokenä½¿ç”¨ç»Ÿè®¡
- APIè°ƒç”¨æ—¶é•¿
- å†…å­˜ä½¿ç”¨æƒ…å†µ
- ä¼šè¯ä¿å­˜çŠ¶æ€

---

## ğŸš€ å·²å®ç°åŠŸèƒ½

### âœ… æ ¸å¿ƒåŠŸèƒ½
- [x] å® ç‰©çª—å£(å³ä¸‹è§’åˆå§‹ä½ç½®)
- [x] ç‚¹å‡»/é•¿æŒ‰äº¤äº’(200msé˜ˆå€¼)
- [x] æ‰‹åŠ¨æ‹–åŠ¨å®ç°(IPCé€šä¿¡)
- [x] ä½ç½®è®°å¿†(è‡ªåŠ¨ä¿å­˜)
- [x] å¯¹è¯çª—å£(æ™ºèƒ½å®šä½)
- [x] å…¨å±€å¿«æ·é”®(Cmd+Shift+0)
- [x] æ™ºèƒ½çª—å£æˆªå›¾
- [x] å›¾ç‰‡è‡ªåŠ¨å‹ç¼©(95%å‹ç¼©ç‡)
- [x] ç²˜è´´æ¿è¯»å–
- [x] ç²˜è´´æ¿ç›‘å¬
- [x] å¤šå›¾ç‰‡å‘é€
- [x] AIå¯¹è¯(æµå¼å“åº”)
- [x] Markdownæ¸²æŸ“
- [x] ä»£ç é«˜äº®
- [x] é…ç½®ç®¡ç†
- [x] è‡ªåŠ¨èšç„¦
- [x] å¤šæ¡Œé¢æ˜¾ç¤º

### âœ… é«˜çº§åŠŸèƒ½
- [x] BUCç™»å½•è®¤è¯
- [x] ç”¨æˆ·ä¿¡æ¯ç®¡ç†
- [x] å¤šä¼šè¯ç®¡ç†
- [x] ä¼šè¯æŒä¹…åŒ–
- [x] ä¼šè¯è‡ªåŠ¨ä¿å­˜(5ç§’é—´éš”)
- [x] æ™ºèƒ½ä¸Šä¸‹æ–‡ç®¡ç†(v3.1)
- [x] TokenåŠ¨æ€è®¡ç®—
- [x] ä¼˜å…ˆç§»é™¤å›¾ç‰‡ç­–ç•¥
- [x] å‘½ä»¤æ‰§è¡ŒåŠŸèƒ½
- [x] å‘½ä»¤å®‰å…¨éªŒè¯
- [x] å·¥å…·å‡½æ•°è°ƒç”¨(Function Calling)

### âœ… MCPåè®®æ”¯æŒ â­ NEW
- [x] MCP SDKé›†æˆ(å®˜æ–¹@modelcontextprotocol/sdk)
- [x] HTTP/SSEä¼ è¾“åè®®
- [x] OAuth 2.1 PKCEè®¤è¯
- [x] æˆæƒæœåŠ¡å™¨è‡ªåŠ¨å‘ç°
- [x] åŠ¨æ€å®¢æˆ·ç«¯æ³¨å†Œ
- [x] Tokenè‡ªåŠ¨åˆ·æ–°
- [x] Resource Indicators (RFC 8707)
- [x] MCPæœåŠ¡å™¨é…ç½®ç®¡ç†
- [x] MCPå·¥å…·è°ƒç”¨é›†æˆ
- [x] 54ä¸ªå·¥å…·å¯ç”¨(6æœ¬åœ°+48 MCP)

### âœ… ç”¨æˆ·ä½“éªŒ
- [x] ä¸€é”®å¯åŠ¨è„šæœ¬
- [x] è°ƒè¯•æ—¥å¿—
- [x] é”™è¯¯æç¤º
- [x] å›¾ç‰‡æ‹–æ‹½ç¦ç”¨
- [x] è¾¹ç•Œæ™ºèƒ½å¤„ç†
- [x] ä¼šè¯åˆ‡æ¢æµç•…
- [x] è‡ªåŠ¨ä¿å­˜å¯é 

---

## ğŸ”® æŠ€æœ¯æ¼”è¿›è§„åˆ’

### çŸ­æœŸä¼˜åŒ–(Q1 2026)
- [ ] ä¸Šä¸‹æ–‡ç®¡ç†è¿›ä¸€æ­¥ä¼˜åŒ–
- [ ] æ”¯æŒæ›´å¤šAIæ¨¡å‹åˆ‡æ¢
- [ ] å‘½ä»¤æ‰§è¡Œèƒ½åŠ›æ‰©å±•
- [ ] ä¼šè¯æœç´¢åŠŸèƒ½

### ä¸­æœŸæ‰©å±•(Q2 2026)
- [ ] Windowså¹³å°é€‚é…
- [ ] æ’ä»¶ç³»ç»Ÿè®¾è®¡
- [ ] æ›´å¤šAIå·¥å…·å‡½æ•°
- [ ] æ€§èƒ½ç›‘æ§é¢æ¿

### é•¿æœŸæ„¿æ™¯(H2 2026)
- [ ] Linuxå¹³å°æ”¯æŒ
- [ ] åˆ†å¸ƒå¼æ¶æ„
- [ ] å›¢é˜Ÿåä½œåŠŸèƒ½
- [ ] äº‘ç«¯åŒæ­¥(å¯é€‰)

---

## ğŸ“ˆ æ€§èƒ½æŒ‡æ ‡

### å…³é”®æŒ‡æ ‡
- **å¯åŠ¨æ—¶é—´**ï¼š< 2ç§’
- **æˆªå›¾å¤„ç†**ï¼š< 500ms
- **å‹ç¼©æ•ˆæœ**ï¼š95%å‹ç¼©ç‡
- **Tokenä¼˜åŒ–**ï¼šèŠ‚çœ64%
- **å¯¹è¯å†å²**ï¼šæå‡67%
- **è‡ªåŠ¨ä¿å­˜**ï¼š5ç§’é—´éš”
- **å†…å­˜å ç”¨**ï¼š< 200MB
- **å“åº”å»¶è¿Ÿ**ï¼š< 100ms(æµå¼é¦–å­—)

---

**æ–‡æ¡£ç‰ˆæœ¬**ï¼šv5.0
**æœ€åæ›´æ–°**ï¼š2026-01-21
**è´Ÿè´£äºº**ï¼šå“ˆé›…ï¼ˆ263321ï¼‰
**çŠ¶æ€**ï¼šâœ… ç”Ÿäº§å°±ç»ª(å«MCPåè®®æ”¯æŒ)

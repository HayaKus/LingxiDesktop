# å¦‚ä½•é…ç½®æ›´æ–°åŠŸèƒ½ - å®Œæ•´æ“ä½œæŒ‡å—

## ğŸ¯ ç›®æ ‡

è®©ç”¨æˆ·ç‚¹å‡»"æ£€æµ‹æ›´æ–°"æŒ‰é’®æ—¶,èƒ½å¤Ÿæ£€æµ‹åˆ°æ–°ç‰ˆæœ¬å¹¶ä¸‹è½½å®‰è£…ã€‚

**é‡è¦è¯´æ˜**: 
- âœ… **ç”¨æˆ·ä¸éœ€è¦ GitHub è´¦å·** - åªéœ€è¦ç‚¹å‡»æŒ‰é’®,åº”ç”¨ä¼šè‡ªåŠ¨æ£€æµ‹æ›´æ–°
- âœ… **å¼€å‘è€…éœ€è¦ GitHub è´¦å·** - ç”¨äºæ‰˜ç®¡ç‰ˆæœ¬ä¿¡æ¯æ–‡ä»¶å’Œå‘å¸ƒå®‰è£…åŒ…
- âœ… **å®Œå…¨å…è´¹** - GitHub å…¬å¼€ä»“åº“æä¾›å…è´¹çš„æ–‡ä»¶æ‰˜ç®¡å’Œ CDN

### è§’è‰²åˆ†å·¥

| è§’è‰² | éœ€è¦åšä»€ä¹ˆ | éœ€è¦è´¦å·å— |
|------|-----------|-----------|
| **å¼€å‘è€…(ä½ )** | é…ç½®æ›´æ–°åœ°å€ã€å‘å¸ƒæ–°ç‰ˆæœ¬ | âœ… éœ€è¦ GitHub è´¦å· |
| **ç”¨æˆ·** | ç‚¹å‡»"æ£€æµ‹æ›´æ–°"æŒ‰é’®ã€ä¸‹è½½å®‰è£… | âŒ ä¸éœ€è¦ä»»ä½•è´¦å· |

## ğŸ“‹ æ“ä½œæ­¥éª¤

### ç¬¬ä¸€æ­¥: é€‰æ‹©æ‰˜ç®¡æ–¹å¼

ä½ éœ€è¦é€‰æ‹©ä¸€ä¸ªåœ°æ–¹æ¥å­˜æ”¾ `version.json` æ–‡ä»¶,æœ‰ä»¥ä¸‹ä¸‰ç§æ–¹å¼:

#### æ–¹å¼A: ä½¿ç”¨ GitHub (æ¨è,å…è´¹ç®€å•)
#### æ–¹å¼B: ä½¿ç”¨é˜¿é‡Œäº‘ OSS (é€‚åˆå†…ç½‘)
#### æ–¹å¼C: è‡ªå»ºæœåŠ¡å™¨

---

## ğŸš€ æ–¹å¼A: ä½¿ç”¨ GitHub (æ¨è,å…è´¹)

> **æ³¨æ„**: è¿™éƒ¨åˆ†é…ç½®åªéœ€è¦**å¼€å‘è€…(ä½ )**æ“ä½œä¸€æ¬¡,ç”¨æˆ·**ä¸éœ€è¦**GitHub è´¦å·ä¹Ÿå¯ä»¥æ£€æµ‹æ›´æ–°å’Œä¸‹è½½åº”ç”¨!

### å·¥ä½œåŸç†

1. **å¼€å‘è€…**: å°† `version.json` å’Œå®‰è£…åŒ…å‘å¸ƒåˆ° GitHub (å…¬å¼€ä»“åº“)
2. **åº”ç”¨**: è‡ªåŠ¨ä» GitHub è¯»å–ç‰ˆæœ¬ä¿¡æ¯(æ— éœ€ç™»å½•)
3. **ç”¨æˆ·**: ç‚¹å‡»"æ£€æµ‹æ›´æ–°",å¦‚æœ‰æ–°ç‰ˆæœ¬ç‚¹å‡»ä¸‹è½½(è‡ªåŠ¨è·³è½¬åˆ° GitHub Releases,æ— éœ€ç™»å½•å³å¯ä¸‹è½½)

### 1. åœ¨ GitHub ä»“åº“ä¸­åˆ›å»º version.json

åœ¨ä½ çš„é¡¹ç›®ä»“åº“æ ¹ç›®å½•åˆ›å»º `version.json` æ–‡ä»¶:

```json
{
  "version": "0.2.0",
  "releaseDate": "2026-01-21",
  "downloadUrl": "https://github.com/YOUR_USERNAME/YOUR_REPO/releases/download/v0.2.0/lingxi-0.2.0.dmg",
  "changeLog": [
    "æ–°å¢: åº”ç”¨å†…æ£€æµ‹æ›´æ–°åŠŸèƒ½",
    "ä¼˜åŒ–: æ”¹è¿›ç”¨æˆ·ç•Œé¢",
    "ä¿®å¤: è‹¥å¹²å·²çŸ¥é—®é¢˜"
  ]
}
```

**æ³¨æ„**: 
- `version` å¿…é¡»å¤§äºå½“å‰ç‰ˆæœ¬(å½“å‰æ˜¯ 0.1.0)
- `downloadUrl` æ˜¯ä½ ä¸Šä¼ åˆ° GitHub Releases çš„å®‰è£…åŒ…åœ°å€

### 2. ä¿®æ”¹ä»£ç ä¸­çš„æ›´æ–°åœ°å€

æ‰“å¼€ `electron/updateManager.ts`,ä¿®æ”¹ç¬¬ 29 è¡Œ:

```typescript
// ä¿®æ”¹å‰
this.updateUrl = updateUrl || 'https://raw.githubusercontent.com/YOUR_USERNAME/YOUR_REPO/main/version.json';

// ä¿®æ”¹å (æ›¿æ¢ä¸ºä½ çš„ä»“åº“åœ°å€)
this.updateUrl = updateUrl || 'https://raw.githubusercontent.com/haya-lhw/IamDog/main/version.json';
```

### 3. æäº¤ä»£ç 

```bash
git add .
git commit -m "é…ç½®æ›´æ–°æœåŠ¡å™¨åœ°å€"
git push
```

### 4. æµ‹è¯•åŠŸèƒ½

```bash
# å¯åŠ¨åº”ç”¨
npm run electron:dev

# æ‰“å¼€è®¾ç½®é¡µé¢,ç‚¹å‡»"æ£€æµ‹æ›´æ–°"æŒ‰é’®
# åº”è¯¥èƒ½çœ‹åˆ°æ£€æµ‹ç»“æœ
```

### 5. å‘å¸ƒæ–°ç‰ˆæœ¬æµç¨‹

**æ¯æ¬¡å‘å¸ƒæ–°ç‰ˆæœ¬æ—¶:**

1. æ›´æ–° `package.json` ä¸­çš„ç‰ˆæœ¬å·:
```bash
npm version 0.2.0  # æ”¹ä¸ºä½ çš„æ–°ç‰ˆæœ¬å·
```

2. æ„å»ºåº”ç”¨:
```bash
npm run electron:build
```

3. ä¸Šä¼ å®‰è£…åŒ…åˆ° GitHub Releases:
   - è¿›å…¥ GitHub ä»“åº“é¡µé¢
   - ç‚¹å‡» "Releases" â†’ "Create a new release"
   - å¡«å†™ç‰ˆæœ¬å·(å¦‚ v0.2.0)å’Œæ›´æ–°è¯´æ˜
   - ä¸Šä¼  `release/lingxi-0.2.0.dmg` æ–‡ä»¶
   - ç‚¹å‡» "Publish release"

4. å¤åˆ¶ä¸‹è½½é“¾æ¥,æ›´æ–° `version.json`:
```json
{
  "version": "0.2.0",
  "releaseDate": "2026-01-21",
  "downloadUrl": "https://github.com/haya-lhw/IamDog/releases/download/v0.2.0/lingxi-0.2.0.dmg",
  "changeLog": [
    "ä½ çš„æ›´æ–°å†…å®¹1",
    "ä½ çš„æ›´æ–°å†…å®¹2"
  ]
}
```

5. æäº¤ version.json:
```bash
git add version.json
git commit -m "æ›´æ–°ç‰ˆæœ¬ä¿¡æ¯åˆ° 0.2.0"
git push
```

6. å®Œæˆ!

**ç”¨æˆ·ç«¯ä½“éªŒ**:
- ç”¨æˆ·æ‰“å¼€åº”ç”¨ â†’ è®¾ç½® â†’ æ£€æµ‹æ›´æ–°
- åº”ç”¨è‡ªåŠ¨ä» GitHub è·å–ç‰ˆæœ¬ä¿¡æ¯(æ— éœ€ç™»å½•)
- å¦‚æœ‰æ–°ç‰ˆæœ¬,æ˜¾ç¤ºæ›´æ–°å†…å®¹
- ç‚¹å‡»"ç«‹å³ä¸‹è½½"è·³è½¬åˆ° GitHub Releases é¡µé¢
- ç›´æ¥ä¸‹è½½å®‰è£…åŒ…(GitHub å…¬å¼€ Release æ— éœ€ç™»å½•å³å¯ä¸‹è½½)

ğŸ’¡ **ç”¨æˆ·å®Œå…¨ä¸éœ€è¦ GitHub è´¦å·,ä¹Ÿä¸éœ€è¦çŸ¥é“ä»€ä¹ˆæ˜¯ GitHub!**

---

## ğŸŒ æ–¹å¼B: ä½¿ç”¨é˜¿é‡Œäº‘ OSS

### 1. åˆ›å»º OSS Bucket

1. ç™»å½•é˜¿é‡Œäº‘æ§åˆ¶å°
2. è¿›å…¥ OSS æœåŠ¡
3. åˆ›å»ºä¸€ä¸ª Bucket (å¦‚: `iamdog-updates`)
4. è®¾ç½®è¯»å†™æƒé™ä¸º "å…¬å…±è¯»"

### 2. ä¸Šä¼  version.json

åˆ›å»º `version.json` æ–‡ä»¶:

```json
{
  "version": "0.2.0",
  "releaseDate": "2026-01-21",
  "downloadUrl": "https://iamdog-updates.oss-cn-hangzhou.aliyuncs.com/releases/lingxi-0.2.0.dmg",
  "changeLog": [
    "æ–°å¢: åº”ç”¨å†…æ£€æµ‹æ›´æ–°åŠŸèƒ½",
    "ä¼˜åŒ–: æ”¹è¿›ç”¨æˆ·ç•Œé¢"
  ]
}
```

ä¸Šä¼ åˆ° OSS æ ¹ç›®å½•ã€‚

### 3. é…ç½® CORS

åœ¨ OSS æ§åˆ¶å°é…ç½® CORS è§„åˆ™:

```
æ¥æº: *
å…è®¸ Methods: GET
å…è®¸ Headers: *
```

### 4. ä¿®æ”¹ä»£ç 

æ‰“å¼€ `electron/updateManager.ts`,ä¿®æ”¹ç¬¬ 29 è¡Œ:

```typescript
this.updateUrl = updateUrl || 'https://iamdog-updates.oss-cn-hangzhou.aliyuncs.com/version.json';
```

### 5. å‘å¸ƒæ–°ç‰ˆæœ¬æµç¨‹

1. æ„å»ºåº”ç”¨: `npm run electron:build`
2. ä¸Šä¼ å®‰è£…åŒ…åˆ° OSS çš„ `releases` ç›®å½•
3. æ›´æ–° `version.json` ä¸­çš„ version å’Œ downloadUrl
4. ä¸Šä¼  `version.json` åˆ° OSS æ ¹ç›®å½•

---

## ğŸ–¥ï¸ æ–¹å¼C: è‡ªå»ºæœåŠ¡å™¨

### 1. åˆ›å»º API æ¥å£

åœ¨ä½ çš„æœåŠ¡å™¨ä¸Šåˆ›å»ºä¸€ä¸ªæ¥å£,è¿”å›ç‰ˆæœ¬ä¿¡æ¯:

```javascript
// Node.js + Express ç¤ºä¾‹
app.get('/api/version', (req, res) => {
  res.json({
    version: "0.2.0",
    releaseDate: "2026-01-21",
    downloadUrl: "https://your-domain.com/downloads/lingxi-0.2.0.dmg",
    changeLog: [
      "æ–°å¢: åº”ç”¨å†…æ£€æµ‹æ›´æ–°åŠŸèƒ½",
      "ä¼˜åŒ–: æ”¹è¿›ç”¨æˆ·ç•Œé¢"
    ]
  });
});
```

### 2. é…ç½® CORS

```javascript
app.use((req, res, next) => {
  res.header('Access-Control-Allow-Origin', '*');
  res.header('Access-Control-Allow-Methods', 'GET');
  next();
});
```

### 3. ä¿®æ”¹ä»£ç 

æ‰“å¼€ `electron/updateManager.ts`,ä¿®æ”¹ç¬¬ 29 è¡Œ:

```typescript
this.updateUrl = updateUrl || 'https://your-domain.com/api/version';
```

---

## ğŸ§ª æµ‹è¯•æ£€æŸ¥æ¸…å•

åœ¨æ­£å¼å‘å¸ƒå‰,è¯·ç¡®è®¤ä»¥ä¸‹å‡ ç‚¹:

- [ ] `version.json` å¯ä»¥é€šè¿‡æµè§ˆå™¨ç›´æ¥è®¿é—®
- [ ] `version.json` ä¸­çš„ version å¤§äºå½“å‰åº”ç”¨ç‰ˆæœ¬
- [ ] `downloadUrl` æŒ‡å‘çš„æ–‡ä»¶å¯ä»¥ä¸‹è½½
- [ ] åœ¨å¼€å‘æ¨¡å¼ä¸‹ç‚¹å‡»"æ£€æµ‹æ›´æ–°"èƒ½çœ‹åˆ°ç»“æœ
- [ ] CORS é…ç½®æ­£ç¡®(å¦‚æœè·¨åŸŸ)

---

## ğŸ“ å¿«é€Ÿç¤ºä¾‹ (GitHub æ–¹å¼)

å‡è®¾ä½ çš„ä»“åº“æ˜¯ `https://github.com/haya-lhw/IamDog`:

### ç¬¬ä¸€æ¬¡é…ç½®

1. **åˆ›å»º version.json** (é¡¹ç›®æ ¹ç›®å½•):
```json
{
  "version": "0.1.1",
  "releaseDate": "2026-01-22",
  "downloadUrl": "https://github.com/haya-lhw/IamDog/releases/download/v0.1.1/lingxi-0.1.1.dmg",
  "changeLog": [
    "æµ‹è¯•æ›´æ–°åŠŸèƒ½"
  ]
}
```

2. **ä¿®æ”¹ updateManager.ts**:
```typescript
this.updateUrl = updateUrl || 'https://raw.githubusercontent.com/haya-lhw/IamDog/main/version.json';
```

3. **æäº¤å¹¶æ¨é€**:
```bash
git add version.json electron/updateManager.ts
git commit -m "é…ç½®æ›´æ–°åŠŸèƒ½"
git push
```

4. **æ„å»ºå’Œå‘å¸ƒ**:
```bash
npm run electron:build
# ç„¶åå» GitHub åˆ›å»º Release å¹¶ä¸Šä¼  dmg æ–‡ä»¶
```

5. **æµ‹è¯•**:
```bash
npm run electron:dev
# æ‰“å¼€è®¾ç½® â†’ æ£€æµ‹æ›´æ–°
```

### ä»¥åå‘å¸ƒæ–°ç‰ˆæœ¬

1. æ›´æ–°ç‰ˆæœ¬å·: `npm version 0.2.0`
2. æ„å»º: `npm run electron:build`
3. GitHub ä¸Šä¼ æ–°çš„ Release
4. æ›´æ–° `version.json`:
```json
{
  "version": "0.2.0",
  "releaseDate": "2026-02-01",
  "downloadUrl": "https://github.com/haya-lhw/IamDog/releases/download/v0.2.0/lingxi-0.2.0.dmg",
  "changeLog": [
    "æ–°åŠŸèƒ½1",
    "æ–°åŠŸèƒ½2"
  ]
}
```
5. æäº¤: `git add version.json && git commit -m "update to 0.2.0" && git push`

å®Œæˆ!

---

## â“ å¸¸è§é—®é¢˜

### Q: ç‚¹å‡»"æ£€æµ‹æ›´æ–°"æ˜¾ç¤ºç½‘ç»œé”™è¯¯?
**A:** æ£€æŸ¥:
1. `version.json` çš„ URL æ˜¯å¦æ­£ç¡®
2. æ–‡ä»¶æ˜¯å¦å¯ä»¥åœ¨æµè§ˆå™¨ç›´æ¥è®¿é—®
3. æ˜¯å¦é…ç½®äº† CORS

### Q: æ˜¾ç¤º"å·²æ˜¯æœ€æ–°ç‰ˆæœ¬"ä½†å®é™…æœ‰æ–°ç‰ˆæœ¬?
**A:** æ£€æŸ¥:
1. `version.json` ä¸­çš„ version æ˜¯å¦å¤§äºåº”ç”¨å½“å‰ç‰ˆæœ¬
2. ç‰ˆæœ¬å·æ ¼å¼æ˜¯å¦æ­£ç¡® (å¦‚ 0.2.0)
3. æ¸…é™¤æµè§ˆå™¨ç¼“å­˜æˆ–ç­‰å¾…å‡ åˆ†é’Ÿ

### Q: å¦‚ä½•åœ¨æœ¬åœ°æµ‹è¯•?
**A:** 
```bash
# 1. å¯åŠ¨æœ¬åœ°æœåŠ¡å™¨
cd /Users/haya/Code/IamDog
python3 -m http.server 8080

# 2. ä¿®æ”¹ updateManager.ts
this.updateUrl = 'http://localhost:8080/version.json'

# 3. æµ‹è¯•
npm run electron:dev
```

---

## ğŸ‰ æ€»ç»“

æœ€ç®€å•çš„æ–¹å¼æ˜¯ä½¿ç”¨ **GitHub** + **GitHub Releases**:

### å¼€å‘è€…(ä½ )éœ€è¦åšçš„:
1. âœ… æ‹¥æœ‰ä¸€ä¸ª GitHub è´¦å·å’Œå…¬å¼€ä»“åº“
2. âœ… ä¿®æ”¹ `electron/updateManager.ts` ä¸­çš„ URL
3. âœ… æ¯æ¬¡å‘å¸ƒæ—¶æ›´æ–° `version.json` å¹¶æäº¤åˆ° GitHub
4. âœ… ä¸Šä¼ å®‰è£…åŒ…åˆ° GitHub Releases

### ç”¨æˆ·éœ€è¦åšçš„:
1. âœ… æ‰“å¼€åº”ç”¨è®¾ç½®
2. âœ… ç‚¹å‡»"æ£€æµ‹æ›´æ–°"æŒ‰é’®
3. âœ… å¦‚æœ‰æ–°ç‰ˆæœ¬,ç‚¹å‡»"ç«‹å³ä¸‹è½½"
4. âœ… ä¸‹è½½å¹¶å®‰è£…æ–°ç‰ˆæœ¬

**ç”¨æˆ·å®Œå…¨ä¸éœ€è¦ GitHub è´¦å·!** ğŸ‰

GitHub çš„å…¬å¼€ä»“åº“å’Œ Releases éƒ½æ˜¯å¯ä»¥åŒ¿åè®¿é—®å’Œä¸‹è½½çš„,è¿™å°±æ˜¯ä¸ºä»€ä¹ˆå¾ˆå¤šå¼€æºè½¯ä»¶éƒ½ç”¨ GitHub æ¥å‘å¸ƒæ›´æ–°çš„åŸå› ã€‚

**å°±è¿™ä¹ˆç®€å•!** ğŸš€

---

**éœ€è¦å¸®åŠ©?** è”ç³»: å“ˆé›… (263321)  
**æœ€åæ›´æ–°**: 2026-01-21
